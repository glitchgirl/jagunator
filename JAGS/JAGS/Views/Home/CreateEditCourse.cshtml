@model CourseInfo
@{
    ViewData["Title"] = "Create/Edit Course";
    Layout = "_Layout";
}
@using Microsoft.AspNetCore.Mvc;
@using Microsoft.AspNetCore.Http;
@using System.Linq;
@using System.Collections.Generic;

<h2>@ViewBag.Title</h2> 


    <div class="form-inline">
        <label for="Course">Course</label>
        <div class="CourseDropDown" id="CECourseDropDown">
            @Html.DropDownListFor(c => c.CourseList, new SelectList(Model.CourseList, "CourseNumberID", "CourseNameFromFile"), "Create New Course")
        </div>
        <label for="InstructorName">Instructor Name</label>
        <div class="CEInstructorName" id="CEInstructorName">
            @Html.TextBoxFor(a => a.IntructorName)
        </div>
        <label for="CourseName">Course Name</label>
        <div class="CECourseName" id="CECourseName">
            @Html.TextBoxFor(a => a.CourseName)
        </div>
        <label for="CourseID">Course ID</label>
        <div class="CECourseID" id="CECourseID">
            @Html.TextBoxFor(a => a.CourseID)
        </div>
            <label for="CampusLocation">Campus Location</label>
            @Html.HiddenFor(x => x.CourseID)
            @foreach (var a in Model.CampusNames)
            {
                <div class="form-horizontal">
                @Html.RadioButtonFor(b => b.CampusNames, a.CampusID) @a.CampusName
                </div>
            }
        
        
            <label for="ClassroomSize">Classroom Size</label>
            @foreach (var a in Model.ClassroomStudentSize)
            {
                <div class="form-horizontal">
                @Html.RadioButtonFor(b => b.ClassroomStudentSize, a.ClassroomID) @a.ClassSize
                    </div>
            }
       
    </div>

<input type="button" value="Save" id="crsSave" />
<input type="button" value="Cancel" id="crsCancel" onclick="window.location.href='CreateEdit';" />

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<!--         <script src="~/js/LoadCourse.js" type="text/javascript"></script>  -->
 
<script type="text/javascript">
    $(function () {
        $('#CourseList').change(function () {
            if ($('#CourseList option:selected').text() !== 'Create New Course') {
                //var selected = window.location.protocol + '//' + window.location.host + '/' + 'Home/Data/Courses/' + $('#CourseList option:selected').text() + '.csv';
                var selected = $('#CourseList option:selected').text();


                $.post("@Url.Action("GetCourseValues", "Home")?val=" + selected, function (res) {
                    if (res.success === "true") {
                        $('#IntructorName').val(res.data.instructorName);
                        $('#CourseName').val(res.data.courseName);
                        $('#CourseID').val(res.data.courseID);
                        $('input[name = CampusNames][value = ' + res.data.campusName + ']').prop('checked', true);
                        $('input[name=ClassroomStudentSize][value=' + res.data.classroomSize + ']').prop('checked', true);
                    }
                });
            }
            else
            { 
                $('#IntructorName').val("");
                $('#CourseName').val("");
                $('#CourseID').val("");
                $('input[name = CampusNames][value = ' + 0 + ']').prop('checked', true);
                $('input[name=ClassroomStudentSize][value=' + 0 + ']').prop('checked', true);
            }
        });
    })
    </script>
@model CourseInfo

@{
    ViewData["Title"] = "Create/Edit Course";
    if (ViewBag.sessiontype == "Admin")
    {
        Layout = "_Layout";
    }
    else if (ViewBag.sessiontype == "Editor")
    {
        Layout = "_LayoutEditor";
    }
    else if (ViewBag.sessiontype == "Viewer")
    {
        Layout = "_LayoutViewer";
    }
}
@using Microsoft.AspNetCore.Mvc;
@using Microsoft.AspNetCore.Http;
@using System.Linq;
@using System.Collections.Generic;

<hr />
<h2>@ViewBag.Title</h2>
<hr />

<form>
    <fieldset>
        <div class="row">
            <div class="col-lg-12 text-center"><h3>Course Information</h3></div>
        </div>
        <br />
        <div class="row">
            <label for="Course" class="col-md-3 text-right">Course Subject</label>
            <div class="col-md-3" id="CECourseSubject">
                @Html.TextBoxFor(a => a.CourseSubject, new { @id = "textSubjectID", @class = "hidden" })
                @Html.DropDownListFor(a => a.CourseSubject, new SelectList(Model.Subject, "CourseSubjectID", "SubjectCode"), "Select Subject", new { @id = "subjectID", @class = "form-control" })
            </div>
            <label for="CourseName" class="col-md-3 text-right">Course Name</label>
            <div class="col-md-3" id="CECourseName">
                @Html.TextBoxFor(a => a.CourseName, new { @id = "CourseNameID", @class = "form-control" })
            </div>
        </div>

        <div class="row">
        </div>
        <br />
        <div class="row">
            <label for="CourseIDDD" class="col-md-3 text-right">Course ID</label>
            <div class="col-md-3" id="CECourseSubject">
                @Html.DropDownListFor(a => a.CourseIDList, new SelectList(Model.CourseIDList, "CourseListID", "CourseIDForSchedule"), "Select ID", new { @class = "form-control", @id = "CourseListID" })
            </div>



            <label for="CourseIDText" class="col-md-3 text-right">Course ID</label>
            <div class="col-md-3" id="CECourseIDText">
                @Html.TextBoxFor(Model => Model.CourseID, new { @class = "form-control", @id = "CourseIDText" })
            </div>
        </div>

        <br />
        <div class="row">
            <label for="CourseCreditHours" class="col-md-3 text-right">Credit Hours</label>
            <div class="col-md-3" id="CECourseCredit">
                @Html.TextBoxFor(a => a.CreditHours, new { @id = "CreditHours", @class = "hidden" })
                @Html.DropDownListFor(a => a.CreditHours, new SelectList(Model.CourseCreditList, "CreditID", "CreditAmount"), "Select Credit Hours", new { @class = "form-control", @id = "CourseCreditHours" })
            </div>
        </div>

        <br />
        <div class="row">
            <input type="submit" name="SaveCourse" value="Save Course" formaction=@Url.Action("CreateEditCourse") formmethod="post" class="btn btn-primary" />
        </div>
    </fieldset>
</form>
<!-------------------------------------PAGE SEPARATION BREAK--------------------------------------->


<div class="row">
    <div class="col-lg-12 text-center"><h3>Section Information</h3></div>
</div>

<label for="Semester">Semester</label>
<div class="text-center" id="Semester">
    @Html.DropDownListFor(a => a.Semester, new SelectList(Model.Semester, "SemesterID", "SemesterNameFromDirectory"), "Select Semester", new { @class = "form-control" })
</div>

<!--
<label for="Section">Section</label>
<div class="text-center" id="Section">
   @@Html.DropDownListFor(a => a.CourseSection, new SelectList(Model.CourseSection, "CourseSectionID", "SectionName"), "Select Section", new {@@class = "form-control" })
</div>
    -->
<label for="InstructorName">Instructor Name</label>
<div class="text-center" id="CEInstructorName">
    @Html.DropDownListFor(a => a.ListOfInstructors, new SelectList(Model.ListOfInstructors, "InstructorListID", "InstructorName"), "Select Instructor", new { @class = "form-control" })
</div>

<label for="CampusLocation">Campus Location</label>
<div class="text-center" id="CECampus">
    @Html.DropDownListFor(a => a.CampusNames, new SelectList(Model.CampusNames, "CampusID", "CampusName"), "Select Campus", new { @class = "form-control" })
</div>

<label for="ScheduleType">Schedule Type</label>
<div class="text-center" id="CEScheduleTpye">
    @Html.DropDownListFor(a => a.ScheduleType, new SelectList(Model.ScheduleType, "ScheduleTypeID", "ScheduleTypeName"), "Select Schedule Type", new { @class = "form-control" })
</div>
<input type="submit" name="CreateEdit" value="Save" formaction=@Url.Action("CreateEditCourse") formmethod="post" class="btn btn-primary" />
<input type="button" value="Cancel" id="crsCancel" onclick="window.location.href='CreateEdit';" class="btn btn-pr" />



<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<!--         <script src="~/js/LoadCourse.js" type="text/javascript"></script>  -->

<script type="text/javascript">
    $(function () {
        $('#subjectID').change(function () {
            if ($('#subjectID option:selected').text() !== 'Select Subject') {
                var selected = $('#subjectID option:selected').text();
                $('#textSubjectID').val(selected);
            }
        }),
            $('#CourseCreditHours').change(function () {
                if ($('#CourseCreditHours option:selected').text() !== 'Select Subject') {
                    var selected = $('#CourseCreditHours option:selected').text();
                    $('#CreditHours').val(selected);
                }
            }),

            $('#CourseListID').change(function () {
                if ($('#CourseListID option:selected').text() !== 'Select ID') {
                    //var selected = window.location.protocol + '//' + window.location.host + '/' + 'Home/Data/Courses/' + $('#CourseList option:selected').text() + '.csv';
                    var selected = $('#CourseListID option:selected').text();

                    $.post("@Url.Action("GetCourseValues", "Home")?val=" + selected, function (res) {
                        if (res.success === "true") {

                            $('#CourseNameID').val(res.data.courseName);
                            $('#CourseCreditHours').val(res.data.courseCredit - 1).attr('selected', true);
                            $('#CourseIDText').val(res.data.courseID);
                            //$('input[name = CampusLocation][value = ' + res.data.campusName + ']').prop('checked', true);
                            //$('input[name=ClassSize][value=' + res.data.classroomSize + ']').prop('checked', true);
                        }
                    });
                }
                else {
                    $('#CourseNameID').val("");
                    $('#CourseCreditHours').val("").attr('selected', false);
                    $('#CourseIDText').val("");
                    //$('input[name = CampusLocation][value = ' + 0 + ']').prop('checked', true);
                    //$('input[name=ClassSize][value=' + 0 + ']').prop('checked', true);
                }
            });
    });


</script>